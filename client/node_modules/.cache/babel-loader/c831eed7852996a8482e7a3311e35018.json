{"ast":null,"code":"import _slicedToArray from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{followUser,unFollowUser}from\"../../actions/user.actions\";import{isEmpty}from\"../../Util/functions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var FollowHandler=function FollowHandler(_ref){var idToFollow=_ref.idToFollow,type=_ref.type;var userData=useSelector(function(state){return state.userReducer;});var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFollowed=_useState2[0],setIsFollowed=_useState2[1];var handleFollow=function handleFollow(){dispatch(followUser(userData._id,idToFollow));setIsFollowed(true);};var handleUnFollow=function handleUnFollow(){dispatch(unFollowUser(userData._id,idToFollow));setIsFollowed(false);};useEffect(function(){if(!isEmpty(userData.followings)){if(userData.followings.includes(idToFollow)){setIsFollowed(true);}else{setIsFollowed(false);}}},[userData,idToFollow]);return/*#__PURE__*/_jsxs(_Fragment,{children:[isFollowed&&!isEmpty(userData)&&/*#__PURE__*/_jsxs(\"span\",{onClick:handleUnFollow,children:[type===\"suggestion\"&&/*#__PURE__*/_jsx(\"button\",{className:\"unfollow-btn\",children:\"Abonn\\xE9\"}),type===\"card\"&&/*#__PURE__*/_jsx(\"img\",{src:\"./img/icons/checked.svg\",alt:\"checkicon\"})]}),isFollowed===false&&!isEmpty(userData)&&/*#__PURE__*/_jsxs(\"span\",{onClick:handleFollow,children:[type===\"suggestion\"&&/*#__PURE__*/_jsx(\"button\",{className:\"follow-btn\",children:\"Suivre\"}),type===\"card\"&&/*#__PURE__*/_jsx(\"img\",{src:\"./img/icons/check.svg\",alt:\"checkicon\"})]})]});};export default FollowHandler;","map":{"version":3,"sources":["/Users/gus/Documents/work_in_progress/gusbook/client/src/components/profil/FollowHandler.js"],"names":["React","useEffect","useState","useSelector","useDispatch","followUser","unFollowUser","isEmpty","FollowHandler","idToFollow","type","userData","state","userReducer","dispatch","isFollowed","setIsFollowed","handleFollow","_id","handleUnFollow","followings","includes"],"mappings":"uIAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,UAAT,CAAqBC,YAArB,KAAyC,4BAAzC,CACA,OAASC,OAAT,KAAwB,sBAAxB,C,6IAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAA0B,IAAvBC,CAAAA,UAAuB,MAAvBA,UAAuB,CAAXC,IAAW,MAAXA,IAAW,CAC9C,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,CAAC,SAACS,KAAD,QAAWA,CAAAA,KAAK,CAACC,WAAjB,EAAD,CAA5B,CACA,GAAMC,CAAAA,QAAQ,CAAGV,WAAW,EAA5B,CAEA,cAAoCF,QAAQ,CAAC,KAAD,CAA5C,wCAAOa,UAAP,eAAmBC,aAAnB,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBH,QAAQ,CAACT,UAAU,CAACM,QAAQ,CAACO,GAAV,CAAeT,UAAf,CAAX,CAAR,CACAO,aAAa,CAAC,IAAD,CAAb,CACD,CAHD,CAKA,GAAMG,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BL,QAAQ,CAACR,YAAY,CAACK,QAAQ,CAACO,GAAV,CAAeT,UAAf,CAAb,CAAR,CACAO,aAAa,CAAC,KAAD,CAAb,CACD,CAHD,CAKAf,SAAS,CAAC,UAAM,CACd,GAAI,CAACM,OAAO,CAACI,QAAQ,CAACS,UAAV,CAAZ,CAAmC,CACjC,GAAIT,QAAQ,CAACS,UAAT,CAAoBC,QAApB,CAA6BZ,UAA7B,CAAJ,CAA8C,CAC5CO,aAAa,CAAC,IAAD,CAAb,CACD,CAFD,IAEO,CACLA,aAAa,CAAC,KAAD,CAAb,CACD,CACF,CACF,CARQ,CAQN,CAACL,QAAD,CAAWF,UAAX,CARM,CAAT,CAUA,mBACE,2BACGM,UAAU,EAAI,CAACR,OAAO,CAACI,QAAD,CAAtB,eACC,cAAM,OAAO,CAAEQ,cAAf,WACGT,IAAI,GAAK,YAAT,eACC,eAAQ,SAAS,CAAC,cAAlB,uBAFJ,CAIGA,IAAI,GAAK,MAAT,eACC,YAAK,GAAG,CAAC,yBAAT,CAAmC,GAAG,CAAC,WAAvC,EALJ,GAFJ,CAWGK,UAAU,GAAK,KAAf,EAAwB,CAACR,OAAO,CAACI,QAAD,CAAhC,eACC,cAAM,OAAO,CAAEM,YAAf,WACGP,IAAI,GAAK,YAAT,eACC,eAAQ,SAAS,CAAC,YAAlB,oBAFJ,CAIGA,IAAI,GAAK,MAAT,eACC,YAAK,GAAG,CAAC,uBAAT,CAAiC,GAAG,CAAC,WAArC,EALJ,GAZJ,GADF,CAwBD,CAlDD,CAoDA,cAAeF,CAAAA,aAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { followUser, unFollowUser } from \"../../actions/user.actions\";\nimport { isEmpty } from \"../../Util/functions\";\n\nconst FollowHandler = ({ idToFollow, type }) => {\n  const userData = useSelector((state) => state.userReducer);\n  const dispatch = useDispatch();\n\n  const [isFollowed, setIsFollowed] = useState(false);\n\n  const handleFollow = () => {\n    dispatch(followUser(userData._id, idToFollow));\n    setIsFollowed(true);\n  };\n\n  const handleUnFollow = () => {\n    dispatch(unFollowUser(userData._id, idToFollow));\n    setIsFollowed(false);\n  };\n\n  useEffect(() => {\n    if (!isEmpty(userData.followings)) {\n      if (userData.followings.includes(idToFollow)) {\n        setIsFollowed(true);\n      } else {\n        setIsFollowed(false);\n      }\n    }\n  }, [userData, idToFollow]);\n\n  return (\n    <>\n      {isFollowed && !isEmpty(userData) && (\n        <span onClick={handleUnFollow}>\n          {type === \"suggestion\" && (\n            <button className=\"unfollow-btn\">Abonn√©</button>\n          )}\n          {type === \"card\" && (\n            <img src=\"./img/icons/checked.svg\" alt=\"checkicon\" />\n          )}\n        </span>\n      )}\n      {isFollowed === false && !isEmpty(userData) && (\n        <span onClick={handleFollow}>\n          {type === \"suggestion\" && (\n            <button className=\"follow-btn\">Suivre</button>\n          )}\n          {type === \"card\" && (\n            <img src=\"./img/icons/check.svg\" alt=\"checkicon\" />\n          )}\n        </span>\n      )}\n    </>\n  );\n};\n\nexport default FollowHandler;\n"]},"metadata":{},"sourceType":"module"}