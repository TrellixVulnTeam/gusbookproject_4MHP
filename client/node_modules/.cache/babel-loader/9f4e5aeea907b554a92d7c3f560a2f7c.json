{"ast":null,"code":"import _slicedToArray from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SignInForm=function SignInForm(){console.log(process.env.REACT_APP_API_URL);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var handleLogin=function handleLogin(event){event.preventDefault();var emailError=document.querySelector(\".email.error\");var passwordError=document.querySelector(\".password.error\");axios({method:\"POST\",url:\"\".concat(process.env.REACT_APP_API_URL,\"api/user/login\"),withCredentials:true,data:{email:email,password:password}}).then(function(res){console.log(res);if(res.data.errors){emailError.innerHTML=res.data.errors.email;passwordError.innerHTML=res.data.errors.password;}else{window.location=\"/\";}}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleLogin,id:\"sign-up-form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",name:\"email\",onChange:function onChange(event){return setEmail(event.target.value);},value:email}),/*#__PURE__*/_jsx(\"div\",{className:\"email error\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",onChange:function onChange(event){return setPassword(event.target.value);},value:password}),/*#__PURE__*/_jsx(\"div\",{className:\"password error\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Se connecter\"})]});};export default SignInForm;","map":{"version":3,"sources":["/Users/gus/Documents/work_in_progress/gusbook/client/src/components/Log/SignInForm.js"],"names":["React","useState","axios","SignInForm","console","log","process","env","REACT_APP_API_URL","email","setEmail","password","setPassword","handleLogin","event","preventDefault","emailError","document","querySelector","passwordError","method","url","withCredentials","data","then","res","errors","innerHTML","window","location","catch","err","target","value"],"mappings":"uIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBC,OAAO,CAACC,GAAR,CAAYC,OAAO,CAACC,GAAR,CAAYC,iBAAxB,EACA,cAA0BP,QAAQ,CAAC,EAAD,CAAlC,wCAAOQ,KAAP,eAAcC,QAAd,eACA,eAAgCT,QAAQ,CAAC,EAAD,CAAxC,yCAAOU,QAAP,eAAiBC,WAAjB,eACA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,CAC7BA,KAAK,CAACC,cAAN,GACA,GAAMC,CAAAA,UAAU,CAAGC,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAnB,CACA,GAAMC,CAAAA,aAAa,CAAGF,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAtB,CAEAhB,KAAK,CAAC,CACJkB,MAAM,CAAE,MADJ,CAEJC,GAAG,WAAKf,OAAO,CAACC,GAAR,CAAYC,iBAAjB,kBAFC,CAGJc,eAAe,CAAE,IAHb,CAIJC,IAAI,CAAE,CAAEd,KAAK,CAALA,KAAF,CAASE,QAAQ,CAARA,QAAT,CAJF,CAAD,CAAL,CAMGa,IANH,CAMQ,SAACC,GAAD,CAAS,CACbrB,OAAO,CAACC,GAAR,CAAYoB,GAAZ,EACA,GAAIA,GAAG,CAACF,IAAJ,CAASG,MAAb,CAAqB,CACnBV,UAAU,CAACW,SAAX,CAAuBF,GAAG,CAACF,IAAJ,CAASG,MAAT,CAAgBjB,KAAvC,CACAU,aAAa,CAACQ,SAAd,CAA0BF,GAAG,CAACF,IAAJ,CAASG,MAAT,CAAgBf,QAA1C,CACD,CAHD,IAGO,CACLiB,MAAM,CAACC,QAAP,CAAkB,GAAlB,CACD,CACF,CAdH,EAeGC,KAfH,CAeS,SAACC,GAAD,QAAS3B,CAAAA,OAAO,CAACC,GAAR,CAAY0B,GAAZ,CAAT,EAfT,EAgBD,CArBD,CAuBA,mBACE,cAAM,MAAM,CAAC,EAAb,CAAgB,QAAQ,CAAElB,WAA1B,CAAuC,EAAE,CAAC,cAA1C,wBACE,cAAO,OAAO,CAAC,OAAf,mBADF,cAEE,aAFF,cAGE,cACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,OAFL,CAGE,IAAI,CAAC,OAHP,CAIE,QAAQ,CAAE,kBAACC,KAAD,QAAWJ,CAAAA,QAAQ,CAACI,KAAK,CAACkB,MAAN,CAAaC,KAAd,CAAnB,EAJZ,CAKE,KAAK,CAAExB,KALT,EAHF,cAUE,YAAK,SAAS,CAAC,aAAf,EAVF,cAWE,aAXF,cAYE,cAAO,OAAO,CAAC,UAAf,0BAZF,cAaE,aAbF,cAcE,cACE,IAAI,CAAC,UADP,CAEE,EAAE,CAAC,UAFL,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAE,kBAACK,KAAD,QAAWF,CAAAA,WAAW,CAACE,KAAK,CAACkB,MAAN,CAAaC,KAAd,CAAtB,EAJZ,CAKE,KAAK,CAAEtB,QALT,EAdF,cAqBE,YAAK,SAAS,CAAC,gBAAf,EArBF,cAsBE,aAtBF,cAwBE,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,cAA3B,EAxBF,GADF,CA4BD,CAvDD,CAyDA,cAAeR,CAAAA,UAAf","sourcesContent":["import React, { useState } from \"react\";\nimport axios from \"axios\";\n\nconst SignInForm = () => {\n  console.log(process.env.REACT_APP_API_URL);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const handleLogin = (event) => {\n    event.preventDefault();\n    const emailError = document.querySelector(\".email.error\");\n    const passwordError = document.querySelector(\".password.error\");\n\n    axios({\n      method: \"POST\",\n      url: `${process.env.REACT_APP_API_URL}api/user/login`,\n      withCredentials: true,\n      data: { email, password },\n    })\n      .then((res) => {\n        console.log(res);\n        if (res.data.errors) {\n          emailError.innerHTML = res.data.errors.email;\n          passwordError.innerHTML = res.data.errors.password;\n        } else {\n          window.location = \"/\";\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <form action=\"\" onSubmit={handleLogin} id=\"sign-up-form\">\n      <label htmlFor=\"email\">Email</label>\n      <br />\n      <input\n        type=\"text\"\n        id=\"email\"\n        name=\"email\"\n        onChange={(event) => setEmail(event.target.value)}\n        value={email}\n      />\n      <div className=\"email error\"></div>\n      <br />\n      <label htmlFor=\"password\">Mot de passe</label>\n      <br />\n      <input\n        type=\"password\"\n        id=\"password\"\n        name=\"password\"\n        onChange={(event) => setPassword(event.target.value)}\n        value={password}\n      />\n      <div className=\"password error\"></div>\n      <br />\n\n      <input type=\"submit\" value=\"Se connecter\" />\n    </form>\n  );\n};\n\nexport default SignInForm;\n"]},"metadata":{},"sourceType":"module"}