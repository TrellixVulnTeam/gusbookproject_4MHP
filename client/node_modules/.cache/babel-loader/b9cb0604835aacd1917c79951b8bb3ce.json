{"ast":null,"code":"import _slicedToArray from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import UidContext from\"../AppContext\";import Popup from\"reactjs-popup\";import\"reactjs-popup/dist/index.css\";import{useDispatch}from\"react-redux\";import{likePost}from\"../../actions/post.actions\";import{UnlikePost}from\"../../actions/post.actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LikeButton=function LikeButton(_ref){var post=_ref.post;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),liked=_useState2[0],setLiked=_useState2[1];var uid=useContext(UidContext);var dispatch=useDispatch();var handleLike=function handleLike(){dispatch(likePost(post._id,uid));setLiked(true);};var handleUnLike=function handleUnLike(){dispatch(UnlikePost(post._id,uid));setLiked(false);};useEffect(function(){if(post.likers.includes(uid))setLiked(true);else setLiked(false);},[uid,post.likers,liked]);return/*#__PURE__*/_jsxs(\"div\",{className:\"like-container\",children:[uid===null&&/*#__PURE__*/_jsx(Popup,{trigger:/*#__PURE__*/_jsx(\"img\",{src:\"./img/icons/heart.svg\",alt:\"like\"}),position:[\"bottom center\",\"bottom right\",\"bottom left\"],closeOnDocumentClick:true,children:\"Connectez-vous pour int\\xE9ragir\"})// ajouter redirect profil\n,uid&&liked===false&&/*#__PURE__*/_jsx(\"img\",{onClick:handleLike,src:\"./img/icons/heart.svg\",alt:\"like\"}),uid&&liked&&/*#__PURE__*/_jsx(\"img\",{onClick:handleUnLike,src:\"./img/icons/heart-filled.svg\",alt:\"like filed\"}),/*#__PURE__*/_jsx(\"span\",{children:post.likers.length})]});};export default LikeButton;","map":{"version":3,"sources":["/Users/gus/Documents/work_in_progress/gusbook/client/src/components/Post/LikeButton.js"],"names":["React","useEffect","useState","useContext","UidContext","Popup","useDispatch","likePost","UnlikePost","LikeButton","post","liked","setLiked","uid","dispatch","handleLike","_id","handleUnLike","likers","includes","length"],"mappings":"uIAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,CAAqCC,UAArC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,eAAlB,CACA,MAAO,8BAAP,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,QAAT,KAAyB,4BAAzB,CACA,OAASC,UAAT,KAA2B,4BAA3B,C,wFAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAAc,IAAXC,CAAAA,IAAW,MAAXA,IAAW,CAC/B,cAA0BR,QAAQ,CAAC,KAAD,CAAlC,wCAAOS,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,GAAG,CAAGV,UAAU,CAACC,UAAD,CAAtB,CACA,GAAMU,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAEA,GAAMS,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvBD,QAAQ,CAACP,QAAQ,CAACG,IAAI,CAACM,GAAN,CAAWH,GAAX,CAAT,CAAR,CACAD,QAAQ,CAAC,IAAD,CAAR,CACD,CAHD,CAKA,GAAMK,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBH,QAAQ,CAACN,UAAU,CAACE,IAAI,CAACM,GAAN,CAAWH,GAAX,CAAX,CAAR,CACAD,QAAQ,CAAC,KAAD,CAAR,CACD,CAHD,CAKAX,SAAS,CAAC,UAAM,CACd,GAAIS,IAAI,CAACQ,MAAL,CAAYC,QAAZ,CAAqBN,GAArB,CAAJ,CAA+BD,QAAQ,CAAC,IAAD,CAAR,CAA/B,IACKA,CAAAA,QAAQ,CAAC,KAAD,CAAR,CACN,CAHQ,CAGN,CAACC,GAAD,CAAMH,IAAI,CAACQ,MAAX,CAAmBP,KAAnB,CAHM,CAAT,CAKA,mBACE,aAAK,SAAS,CAAC,gBAAf,WACGE,GAAG,GAAK,IAAR,eACC,KAAC,KAAD,EACE,OAAO,cAAE,YAAK,GAAG,CAAC,uBAAT,CAAiC,GAAG,CAAC,MAArC,EADX,CAEE,QAAQ,CAAE,CAAC,eAAD,CAAkB,cAAlB,CAAkC,aAAlC,CAFZ,CAGE,oBAAoB,KAHtB,8CAMS;AARb,CAUGA,GAAG,EAAIF,KAAK,GAAK,KAAjB,eACC,YAAK,OAAO,CAAEI,UAAd,CAA0B,GAAG,CAAC,uBAA9B,CAAsD,GAAG,CAAC,MAA1D,EAXJ,CAaGF,GAAG,EAAIF,KAAP,eACC,YACE,OAAO,CAAEM,YADX,CAEE,GAAG,CAAC,8BAFN,CAGE,GAAG,CAAC,YAHN,EAdJ,cAoBE,sBAAOP,IAAI,CAACQ,MAAL,CAAYE,MAAnB,EApBF,GADF,CAwBD,CA5CD,CA8CA,cAAeX,CAAAA,UAAf","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport UidContext from \"../AppContext\";\nimport Popup from \"reactjs-popup\";\nimport \"reactjs-popup/dist/index.css\";\nimport { useDispatch } from \"react-redux\";\nimport { likePost } from \"../../actions/post.actions\";\nimport { UnlikePost } from \"../../actions/post.actions\";\n\nconst LikeButton = ({ post }) => {\n  const [liked, setLiked] = useState(false);\n  const uid = useContext(UidContext);\n  const dispatch = useDispatch();\n\n  const handleLike = () => {\n    dispatch(likePost(post._id, uid));\n    setLiked(true);\n  };\n\n  const handleUnLike = () => {\n    dispatch(UnlikePost(post._id, uid));\n    setLiked(false);\n  };\n\n  useEffect(() => {\n    if (post.likers.includes(uid)) setLiked(true);\n    else setLiked(false);\n  }, [uid, post.likers, liked]);\n\n  return (\n    <div className=\"like-container\">\n      {uid === null && (\n        <Popup\n          trigger={<img src=\"./img/icons/heart.svg\" alt=\"like\" />}\n          position={[\"bottom center\", \"bottom right\", \"bottom left\"]}\n          closeOnDocumentClick\n        >\n          Connectez-vous pour int√©ragir\n        </Popup> // ajouter redirect profil\n      )}\n      {uid && liked === false && (\n        <img onClick={handleLike} src=\"./img/icons/heart.svg\" alt=\"like\" />\n      )}\n      {uid && liked && (\n        <img\n          onClick={handleUnLike}\n          src=\"./img/icons/heart-filled.svg\"\n          alt=\"like filed\"\n        />\n      )}\n      <span>{post.likers.length}</span>\n    </div>\n  );\n};\n\nexport default LikeButton;\n"]},"metadata":{},"sourceType":"module"}