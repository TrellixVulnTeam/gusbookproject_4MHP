{"ast":null,"code":"import _slicedToArray from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext,useEffect}from\"react\";import UidContext from\"../AppContext\";import{useDispatch}from\"react-redux\";import{editComment,deleteComment}from\"../../actions/post.actions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var EditDeleteComment=function EditDeleteComment(_ref){var comment=_ref.comment,postId=_ref.postId;var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAuthor=_useState2[0],setIsAuthor=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),edit=_useState4[0],setEdit=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),text=_useState6[0],setText=_useState6[1];var uid=useContext(UidContext);var handleEdit=function handleEdit(event){event.preventDefault();if(text){dispatch(editComment(postId,comment._id,text));setText(\"\");setEdit(false);}};var handleDelete=function handleDelete(){dispatch(deleteComment(postId,comment._id));};useEffect(function(){var checkAuthor=function checkAuthor(){if(uid===comment.commenterId){setIsAuthor(true);}};checkAuthor();},[uid,comment.commenterId]);return/*#__PURE__*/_jsxs(\"div\",{className:\"edit-comment\",children:[isAuthor&&edit===false&&/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){return setEdit(!edit);},children:/*#__PURE__*/_jsx(\"img\",{src:\"./img/icons/edit.svg\",alt:\"edit\"})}),isAuthor&&edit&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleEdit,action:\"\",className:\"edit-comment-form\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"text\",onClick:function onClick(){return setEdit(!edit);},children:\"Editer\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"text\",onChange:function onChange(event){return setText(event.target.value);},defaultValue:comment.text}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:function onClick(){if(window.confirm(\"Voulez-vous supprimer ce commentaire\")){handleDelete();}},children:/*#__PURE__*/_jsx(\"img\",{src:\"./img/icons/trash.svg\",alt:\"trash\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Valider modifications\"})]})]})]});};export default EditDeleteComment;","map":{"version":3,"sources":["/Users/gus/Documents/work_in_progress/gusbook/client/src/components/Post/EditDeleteComment.js"],"names":["React","useState","useContext","useEffect","UidContext","useDispatch","editComment","deleteComment","EditDeleteComment","comment","postId","dispatch","isAuthor","setIsAuthor","edit","setEdit","text","setText","uid","handleEdit","event","preventDefault","_id","handleDelete","checkAuthor","commenterId","target","value","window","confirm"],"mappings":"uIAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,CAAsCC,SAAtC,KAAuD,OAAvD,CACA,MAAOC,CAAAA,UAAP,KAAuB,eAAvB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,CAAsBC,aAAtB,KAA2C,4BAA3C,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,MAAyB,IAAtBC,CAAAA,OAAsB,MAAtBA,OAAsB,CAAbC,MAAa,MAAbA,MAAa,CACjD,GAAMC,CAAAA,QAAQ,CAAGN,WAAW,EAA5B,CACA,cAAgCJ,QAAQ,CAAC,KAAD,CAAxC,wCAAOW,QAAP,eAAiBC,WAAjB,eACA,eAAwBZ,QAAQ,CAAC,KAAD,CAAhC,yCAAOa,IAAP,eAAaC,OAAb,eACA,eAAwBd,QAAQ,CAAC,KAAD,CAAhC,yCAAOe,IAAP,eAAaC,OAAb,eACA,GAAMC,CAAAA,GAAG,CAAGhB,UAAU,CAACE,UAAD,CAAtB,CAEA,GAAMe,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,KAAD,CAAW,CAC5BA,KAAK,CAACC,cAAN,GACA,GAAIL,IAAJ,CAAU,CACRL,QAAQ,CAACL,WAAW,CAACI,MAAD,CAASD,OAAO,CAACa,GAAjB,CAAsBN,IAAtB,CAAZ,CAAR,CACAC,OAAO,CAAC,EAAD,CAAP,CACAF,OAAO,CAAC,KAAD,CAAP,CACD,CACF,CAPD,CASA,GAAMQ,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBZ,QAAQ,CAACJ,aAAa,CAACG,MAAD,CAASD,OAAO,CAACa,GAAjB,CAAd,CAAR,CACD,CAFD,CAIAnB,SAAS,CAAC,UAAM,CACd,GAAMqB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACxB,GAAIN,GAAG,GAAKT,OAAO,CAACgB,WAApB,CAAiC,CAC/BZ,WAAW,CAAC,IAAD,CAAX,CACD,CACF,CAJD,CAKAW,WAAW,GACZ,CAPQ,CAON,CAACN,GAAD,CAAMT,OAAO,CAACgB,WAAd,CAPM,CAAT,CAQA,mBACE,aAAK,SAAS,CAAC,cAAf,WACGb,QAAQ,EAAIE,IAAI,GAAK,KAArB,eACC,aAAM,OAAO,CAAE,yBAAMC,CAAAA,OAAO,CAAC,CAACD,IAAF,CAAb,EAAf,uBACE,YAAK,GAAG,CAAC,sBAAT,CAAgC,GAAG,CAAC,MAApC,EADF,EAFJ,CAMGF,QAAQ,EAAIE,IAAZ,eACC,cAAM,QAAQ,CAAEK,UAAhB,CAA4B,MAAM,CAAC,EAAnC,CAAsC,SAAS,CAAC,mBAAhD,wBACE,cAAO,OAAO,CAAC,MAAf,CAAsB,OAAO,CAAE,yBAAMJ,CAAAA,OAAO,CAAC,CAACD,IAAF,CAAb,EAA/B,oBADF,cAIE,aAJF,cAKE,cACE,IAAI,CAAC,MADP,CAEE,IAAI,CAAC,MAFP,CAGE,QAAQ,CAAE,kBAACM,KAAD,QAAWH,CAAAA,OAAO,CAACG,KAAK,CAACM,MAAN,CAAaC,KAAd,CAAlB,EAHZ,CAIE,YAAY,CAAElB,OAAO,CAACO,IAJxB,EALF,cAWE,aAXF,cAYE,aAAK,SAAS,CAAC,KAAf,wBACE,aACE,OAAO,CAAE,kBAAM,CACb,GAAIY,MAAM,CAACC,OAAP,CAAe,sCAAf,CAAJ,CAA4D,CAC1DN,YAAY,GACb,CACF,CALH,uBAOE,YAAK,GAAG,CAAC,uBAAT,CAAiC,GAAG,CAAC,OAArC,EAPF,EADF,cAUE,cAAO,IAAI,CAAC,QAAZ,CAAqB,KAAK,CAAC,uBAA3B,EAVF,GAZF,GAPJ,GADF,CAoCD,CAhED,CAkEA,cAAef,CAAAA,iBAAf","sourcesContent":["import React, { useState, useContext, useEffect } from \"react\";\nimport UidContext from \"../AppContext\";\nimport { useDispatch } from \"react-redux\";\nimport { editComment, deleteComment } from \"../../actions/post.actions\";\n\nconst EditDeleteComment = ({ comment, postId }) => {\n  const dispatch = useDispatch();\n  const [isAuthor, setIsAuthor] = useState(false);\n  const [edit, setEdit] = useState(false);\n  const [text, setText] = useState(false);\n  const uid = useContext(UidContext);\n\n  const handleEdit = (event) => {\n    event.preventDefault();\n    if (text) {\n      dispatch(editComment(postId, comment._id, text));\n      setText(\"\");\n      setEdit(false);\n    }\n  };\n\n  const handleDelete = () => {\n    dispatch(deleteComment(postId, comment._id));\n  };\n\n  useEffect(() => {\n    const checkAuthor = () => {\n      if (uid === comment.commenterId) {\n        setIsAuthor(true);\n      }\n    };\n    checkAuthor();\n  }, [uid, comment.commenterId]);\n  return (\n    <div className=\"edit-comment\">\n      {isAuthor && edit === false && (\n        <span onClick={() => setEdit(!edit)}>\n          <img src=\"./img/icons/edit.svg\" alt=\"edit\" />\n        </span>\n      )}\n      {isAuthor && edit && (\n        <form onSubmit={handleEdit} action=\"\" className=\"edit-comment-form\">\n          <label htmlFor=\"text\" onClick={() => setEdit(!edit)}>\n            Editer\n          </label>\n          <br />\n          <input\n            type=\"text\"\n            name=\"text\"\n            onChange={(event) => setText(event.target.value)}\n            defaultValue={comment.text}\n          />\n          <br />\n          <div className=\"btn\">\n            <span\n              onClick={() => {\n                if (window.confirm(\"Voulez-vous supprimer ce commentaire\")) {\n                  handleDelete();\n                }\n              }}\n            >\n              <img src=\"./img/icons/trash.svg\" alt=\"trash\" />\n            </span>\n            <input type=\"submit\" value=\"Valider modifications\" />\n          </div>\n        </form>\n      )}\n    </div>\n  );\n};\n\nexport default EditDeleteComment;\n"]},"metadata":{},"sourceType":"module"}