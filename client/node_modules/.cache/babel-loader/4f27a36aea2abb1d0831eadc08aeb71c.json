{"ast":null,"code":"import _slicedToArray from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{isEmpty,timestampParser}from\"../../Util/functions\";import FollowHandler from\"../../components/profil/FollowHandler\";import{addComment,getPosts}from\"../../actions/post.actions\";import EditDeleteComment from\"./EditDeleteComment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CardComments=function CardComments(_ref){var post=_ref.post;var usersData=useSelector(function(state){return state.usersReducer;});var userData=useSelector(function(state){return state.userReducer;});var dispatch=useDispatch();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var handleComment=function handleComment(event){event.preventDefault();console.log(text);if(text){dispatch(addComment(post._id,userData._id,text,userData.pseudo)).then(function(){dispatch(getPosts());}).then(function(){return setText(\"\");});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"comments-container\",children:[post.comments.map(function(comment,i){return/*#__PURE__*/_jsxs(\"div\",{className:comment.commenterId===userData._id?\"comment-container client\":\"comment-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"left-part\",children:/*#__PURE__*/_jsx(\"img\",{src:!isEmpty(usersData[0])&&usersData.map(function(userFromUsers){if(userFromUsers._id===comment.commenterId)return userFromUsers.picture;else return null;}).join(\"\"),alt:\"commenter-pic\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"right-part\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pseudo\",children:[/*#__PURE__*/_jsx(\"h3\",{children:comment.commenterPseudo}),comment.commenterId!==userData._id&&/*#__PURE__*/_jsx(FollowHandler,{idToFollow:comment.commenterId,type:\"card\"})]}),/*#__PURE__*/_jsx(\"span\",{children:timestampParser(comment.timestamp)})]}),/*#__PURE__*/_jsx(\"p\",{children:comment.text}),/*#__PURE__*/_jsx(EditDeleteComment,{comment:comment,postId:post._id})]})]},i);}),userData._id&&/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleComment,className:\"comment-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"text\",onChange:function onChange(event){return setText(event.target.value);},value:text,placeholder:\"Laisser un commentaire\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Envoyer\"})]})]});};export default CardComments;","map":{"version":3,"sources":["/Users/gus/Documents/work_in_progress/gusbook/client/src/components/Post/CardComments.js"],"names":["React","useState","useSelector","useDispatch","isEmpty","timestampParser","FollowHandler","addComment","getPosts","EditDeleteComment","CardComments","post","usersData","state","usersReducer","userData","userReducer","dispatch","text","setText","handleComment","event","preventDefault","console","log","_id","pseudo","then","comments","map","comment","i","commenterId","userFromUsers","picture","join","commenterPseudo","timestamp","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { isEmpty, timestampParser } from \"../../Util/functions\";\nimport FollowHandler from \"../../components/profil/FollowHandler\";\nimport { addComment, getPosts } from \"../../actions/post.actions\";\nimport EditDeleteComment from \"./EditDeleteComment\";\n\nconst CardComments = ({ post }) => {\n  const usersData = useSelector((state) => state.usersReducer);\n  const userData = useSelector((state) => state.userReducer);\n  const dispatch = useDispatch();\n\n  const [text, setText] = useState(\"\");\n  const handleComment = (event) => {\n    event.preventDefault();\n    console.log(text);\n    if (text) {\n      dispatch(addComment(post._id, userData._id, text, userData.pseudo))\n        .then(() => {\n          dispatch(getPosts());\n        })\n        .then(() => setText(\"\"));\n    }\n  };\n\n  return (\n    <div className=\"comments-container\">\n      {post.comments.map((comment, i) => {\n        return (\n          <div\n            className={\n              comment.commenterId === userData._id\n                ? \"comment-container client\"\n                : \"comment-container\"\n            }\n            key={i}\n          >\n            <div className=\"left-part\">\n              <img\n                src={\n                  !isEmpty(usersData[0]) &&\n                  usersData\n                    .map((userFromUsers) => {\n                      if (userFromUsers._id === comment.commenterId)\n                        return userFromUsers.picture;\n                      else return null;\n                    })\n                    .join(\"\")\n                }\n                alt=\"commenter-pic\"\n              />\n            </div>\n            <div className=\"right-part\">\n              <div className=\"comment-header\">\n                <div className=\"pseudo\">\n                  <h3>{comment.commenterPseudo}</h3>\n                  {comment.commenterId !== userData._id && (\n                    <FollowHandler\n                      idToFollow={comment.commenterId}\n                      type=\"card\"\n                    />\n                  )}\n                </div>\n                <span>{timestampParser(comment.timestamp)}</span>\n              </div>\n              <p>{comment.text}</p>\n              <EditDeleteComment comment={comment} postId={post._id} />\n            </div>\n          </div>\n        );\n      })}\n      {userData._id && (\n        <form action=\"\" onSubmit={handleComment} className=\"comment-form\">\n          <input\n            type=\"text\"\n            name=\"text\"\n            onChange={(event) => setText(event.target.value)}\n            value={text}\n            placeholder=\"Laisser un commentaire\"\n          />\n          <br />\n          <input type=\"submit\" value=\"Envoyer\" />\n        </form>\n      )}\n    </div>\n  );\n};\n\nexport default CardComments;\n"]},"metadata":{},"sourceType":"module"}