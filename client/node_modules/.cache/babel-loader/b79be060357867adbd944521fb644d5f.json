{"ast":null,"code":"import _regeneratorRuntime from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";/* eslint-disable react-hooks/exhaustive-deps */import React,{useEffect,useState}from\"react\";import Routes from\"./components/routes\";import UidContext from\"./components/AppContext\";import axios from\"axios\";import{useDispatch}from\"react-redux\";import{getUser}from\"./actions/user.actions\";import{jsx as _jsx}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),uid=_useState2[0],_useState2$=_useState2[1],setUid=_useState2$===void 0?useState:_useState2$;var dispatch=useDispatch();useEffect(function(){var fetchToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios({method:\"GET\",url:\"\".concat(process.env.REACT_APP_API_URL,\"jwtid\"),withCredentials:true}).then(function(res){setUid(res.data);}).catch(function(err){return console.log(\"No token \");});case 2:case\"end\":return _context.stop();}}},_callee);}));return function fetchToken(){return _ref.apply(this,arguments);};}();fetchToken();if(uid)dispatch(getUser(uid));},[uid]);return/*#__PURE__*/_jsx(UidContext.Provider,{value:uid,children:/*#__PURE__*/_jsx(Routes,{})});};export default App;","map":{"version":3,"sources":["/Users/gus/Documents/work_in_progress/gusbook/client/src/App.js"],"names":["React","useEffect","useState","Routes","UidContext","axios","useDispatch","getUser","App","uid","setUid","dispatch","fetchToken","method","url","process","env","REACT_APP_API_URL","withCredentials","then","res","data","catch","err","console","log"],"mappings":"kZAAA,gDACA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,OAAT,KAAwB,wBAAxB,C,2CAEA,GAAMC,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,EAAM,CAChB,cAAiCN,QAAQ,CAAC,IAAD,CAAzC,wCAAOO,GAAP,yCAAYC,MAAZ,sBAAqBR,QAArB,aACA,GAAMS,CAAAA,QAAQ,CAAGL,WAAW,EAA5B,CAEAL,SAAS,CAAC,UAAM,CACd,GAAMW,CAAAA,UAAU,0FAAG,yJACXP,CAAAA,KAAK,CAAC,CACVQ,MAAM,CAAE,KADE,CAEVC,GAAG,WAAKC,OAAO,CAACC,GAAR,CAAYC,iBAAjB,SAFO,CAGVC,eAAe,CAAE,IAHP,CAAD,CAAL,CAKHC,IALG,CAKE,SAACC,GAAD,CAAS,CACbV,MAAM,CAACU,GAAG,CAACC,IAAL,CAAN,CACD,CAPG,EAQHC,KARG,CAQG,SAACC,GAAD,QAASC,CAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAT,EARH,CADW,uDAAH,kBAAVb,CAAAA,UAAU,0CAAhB,CAWAA,UAAU,GAEV,GAAIH,GAAJ,CAASE,QAAQ,CAACJ,OAAO,CAACE,GAAD,CAAR,CAAR,CACV,CAfQ,CAeN,CAACA,GAAD,CAfM,CAAT,CAiBA,mBACE,KAAC,UAAD,CAAY,QAAZ,EAAqB,KAAK,CAAEA,GAA5B,uBACE,KAAC,MAAD,IADF,EADF,CAKD,CA1BD,CA4BA,cAAeD,CAAAA,GAAf","sourcesContent":["/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useEffect, useState } from \"react\";\nimport Routes from \"./components/routes\";\nimport UidContext from \"./components/AppContext\";\nimport axios from \"axios\";\nimport { useDispatch } from \"react-redux\";\nimport { getUser } from \"./actions/user.actions\";\n\nconst App = () => {\n  const [uid, setUid = useState] = useState(null);\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    const fetchToken = async () => {\n      await axios({\n        method: \"GET\",\n        url: `${process.env.REACT_APP_API_URL}jwtid`,\n        withCredentials: true,\n      })\n        .then((res) => {\n          setUid(res.data);\n        })\n        .catch((err) => console.log(\"No token \"));\n    };\n    fetchToken();\n\n    if (uid) dispatch(getUser(uid));\n  }, [uid]);\n\n  return (\n    <UidContext.Provider value={uid}>\n      <Routes />\n    </UidContext.Provider>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}