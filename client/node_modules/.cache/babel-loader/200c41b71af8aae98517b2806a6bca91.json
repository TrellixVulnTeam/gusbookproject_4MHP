{"ast":null,"code":"import _slicedToArray from\"/Users/gus/Documents/work_in_progress/gusbook/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{useSelector}from\"react-redux\";import{useDispatch}from\"react-redux\";import{getPosts}from\"../actions/post.actions\";import{isEmpty}from\"../Util/functions\";import Card from\"../components/Post/Card\";import{jsx as _jsx}from\"react/jsx-runtime\";var Thread=function Thread(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loadPost=_useState2[0],setLoadPost=_useState2[1];var _useState3=useState(5),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1];var dispatch=useDispatch();var posts=useSelector(function(state){return state.postReducer;});var loadMore=function loadMore(){if(window.innerHeight+document.documentElement.scrollTop+1>document.scrollingElement.scrollHeight){setLoadPost(true);}};useEffect(function(){if(loadPost){dispatch(getPosts(count));setLoadPost(false);setCount(count+5);}window.addEventListener(\"scroll\",loadMore);return function(){return window.removeEventListener(\"scroll\",loadMore);};},[loadPost,dispatch,count]);return/*#__PURE__*/_jsx(\"div\",{className:\"thread-container\",children:/*#__PURE__*/_jsx(\"ul\",{children:!isEmpty(posts[0])&&posts.map(function(post,i){return/*#__PURE__*/_jsx(Card,{post:post},i);})})});};export default Thread;","map":{"version":3,"sources":["/Users/gus/Documents/work_in_progress/gusbook/client/src/components/Thread.js"],"names":["React","useEffect","useState","useSelector","useDispatch","getPosts","isEmpty","Card","Thread","loadPost","setLoadPost","count","setCount","dispatch","posts","state","postReducer","loadMore","window","innerHeight","document","documentElement","scrollTop","scrollingElement","scrollHeight","addEventListener","removeEventListener","map","post","i"],"mappings":"uIAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,QAAT,KAAyB,yBAAzB,CACA,OAASC,OAAT,KAAwB,mBAAxB,CACA,MAAOC,CAAAA,IAAP,KAAiB,yBAAjB,C,2CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnB,cAAgCN,QAAQ,CAAC,IAAD,CAAxC,wCAAOO,QAAP,eAAiBC,WAAjB,eACA,eAA0BR,QAAQ,CAAC,CAAD,CAAlC,yCAAOS,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,QAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,CAAAA,KAAK,CAAGX,WAAW,CAAC,SAACY,KAAD,QAAWA,CAAAA,KAAK,CAACC,WAAjB,EAAD,CAAzB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACrB,GACEC,MAAM,CAACC,WAAP,CAAqBC,QAAQ,CAACC,eAAT,CAAyBC,SAA9C,CAA0D,CAA1D,CACAF,QAAQ,CAACG,gBAAT,CAA0BC,YAF5B,CAGE,CACAd,WAAW,CAAC,IAAD,CAAX,CACD,CACF,CAPD,CASAT,SAAS,CAAC,UAAM,CACd,GAAIQ,QAAJ,CAAc,CACZI,QAAQ,CAACR,QAAQ,CAACM,KAAD,CAAT,CAAR,CACAD,WAAW,CAAC,KAAD,CAAX,CACAE,QAAQ,CAACD,KAAK,CAAG,CAAT,CAAR,CACD,CAEDO,MAAM,CAACO,gBAAP,CAAwB,QAAxB,CAAkCR,QAAlC,EACA,MAAO,kBAAMC,CAAAA,MAAM,CAACQ,mBAAP,CAA2B,QAA3B,CAAqCT,QAArC,CAAN,EAAP,CACD,CATQ,CASN,CAACR,QAAD,CAAWI,QAAX,CAAqBF,KAArB,CATM,CAAT,CAWA,mBACE,YAAK,SAAS,CAAC,kBAAf,uBACE,oBACG,CAACL,OAAO,CAACQ,KAAK,CAAC,CAAD,CAAN,CAAR,EACCA,KAAK,CAACa,GAAN,CAAU,SAACC,IAAD,CAAOC,CAAP,CAAa,CACrB,mBAAO,KAAC,IAAD,EAAc,IAAI,CAAED,IAApB,EAAWC,CAAX,CAAP,CACD,CAFD,CAFJ,EADF,EADF,CAUD,CApCD,CAsCA,cAAerB,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { getPosts } from \"../actions/post.actions\";\nimport { isEmpty } from \"../Util/functions\";\nimport Card from \"../components/Post/Card\";\n\nconst Thread = () => {\n  const [loadPost, setLoadPost] = useState(true);\n  const [count, setCount] = useState(5);\n  const dispatch = useDispatch();\n  const posts = useSelector((state) => state.postReducer);\n\n  const loadMore = () => {\n    if (\n      window.innerHeight + document.documentElement.scrollTop + 1 >\n      document.scrollingElement.scrollHeight\n    ) {\n      setLoadPost(true);\n    }\n  };\n\n  useEffect(() => {\n    if (loadPost) {\n      dispatch(getPosts(count));\n      setLoadPost(false);\n      setCount(count + 5);\n    }\n\n    window.addEventListener(\"scroll\", loadMore);\n    return () => window.removeEventListener(\"scroll\", loadMore);\n  }, [loadPost, dispatch, count]);\n\n  return (\n    <div className=\"thread-container\">\n      <ul>\n        {!isEmpty(posts[0]) &&\n          posts.map((post, i) => {\n            return <Card key={i} post={post} />;\n          })}\n      </ul>\n    </div>\n  );\n};\n\nexport default Thread;\n"]},"metadata":{},"sourceType":"module"}